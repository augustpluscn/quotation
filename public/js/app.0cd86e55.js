(function(e){function t(t){for(var r,s,i=t[0],u=t[1],c=t[2],d=0,f=[];d<i.length;d++)s=i[d],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&f.push(a[s][0]),a[s]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);l&&l(t);while(f.length)f.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,s=1;s<n.length;s++){var u=n[s];0!==a[u]&&(r=!1)}r&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},a={app:0},o=[];function s(e){return i.p+"js/"+({}[e]||e)+"."+{"chunk-2d230e44":"f5404563"}[e]+".js"}function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.e=function(e){var t=[],n=a[e];if(0!==n)if(n)t.push(n[2]);else{var r=new Promise((function(t,r){n=a[e]=[t,r]}));t.push(n[2]=r);var o,u=document.createElement("script");u.charset="utf-8",u.timeout=120,i.nc&&u.setAttribute("nonce",i.nc),u.src=s(e);var c=new Error;o=function(t){u.onerror=u.onload=null,clearTimeout(d);var n=a[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+r+": "+o+")",c.name="ChunkLoadError",c.type=r,c.request=o,n[1](c)}a[e]=void 0}};var d=setTimeout((function(){o({type:"timeout",target:u})}),12e4);u.onerror=u.onload=o,document.head.appendChild(u)}return Promise.all(t)},i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/",i.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],c=u.push.bind(u);u.push=t,u=u.slice();for(var d=0;d<u.length;d++)t(u[d]);var l=c;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},4360:function(e,t,n){"use strict";var r=n("2b0e"),a=n("2f62"),o={token:function(e){return e.user.token}},s=o,i={},u={},c={},d={namespaced:!0,state:i,mutations:u,actions:c},l=n("751a"),f={dd:function(){return l["a"].get("dd",{},!0)},sysset:function(){return l["a"].get("sysset",{},!0)}},p={dd:{},sysSet:{}},m={SET_DD:function(e,t){e.dd=t},SET_SYS_SET:function(e,t){e.sysSet=t}},g={setDd:function(e){var t=e.commit;f.dd().then((function(e){t("SET_DD",e.data.dd)}))},setSysSet:function(e){var t=e.commit;f.sysset().then((function(e){t("SET_SYS_SET",e.data.setting)}))}},h={namespaced:!0,state:p,mutations:m,actions:g},v=n("335a"),b="Token";function k(){return v["a"].get(b,!1)}function y(e){return v["a"].set(b,e),e}function T(){return v["a"].remove(b),!1}var w={token:k()},S={SET_TOKEN:function(e,t){e.token=t}},O={setToken:function(e,t){var n=e.commit;n("SET_TOKEN",y(t))},removeToken:function(e){var t=e.commit;t("SET_TOKEN",T())}},j={namespaced:!0,state:w,mutations:S,actions:O};r["a"].use(a["a"]);var _=new a["a"].Store({modules:{app:d,dd:h,user:j},getters:s});t["a"]=_},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},o=[],s={name:"App",created:function(){this.$store.dispatch("dd/setDd")}},i=s,u=n("2877"),c=Object(u["a"])(i,a,o,!1,null,null,null),d=c.exports,l=n("a18c"),f=n("4360"),p=(n("9536"),n("0ec5"),n("21ab")),m=(n("3df5"),n("2830")),g=(n("66b9"),n("b650")),h=(n("be7f"),n("565f")),v=(n("38d5"),n("772a")),b=(n("5246"),n("6b41"));r["a"].use(b["a"]),r["a"].use(v["a"]),r["a"].use(h["a"]),r["a"].use(g["a"]),r["a"].use(m["a"]),r["a"].use(p["a"]);var k=n("1da1");n("96cf");l["a"].beforeEach(function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t,n,r){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=f["a"].getters.token,a?"/login"===t.path?r({path:"/"}):r():r("/login"===t.path||{path:"/login"});case 2:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()),r["a"].config.productionTip=!1,new r["a"]({router:l["a"],store:f["a"],render:function(e){return e(d)}}).$mount("#app")},"751a":function(e,t,n){"use strict";n("e17f");var r=n("2241"),a=(n("e7e5"),n("d399")),o=(n("d3b7"),n("b0c0"),n("ac1f"),n("5319"),n("caad"),n("2532"),n("e9c4"),n("bc3a")),s=n.n(o),i=n("4328"),u=n.n(i),c=n("4360"),d=n("a18c"),l=s.a.create({baseURL:"http://inv.git/api/",timeout:5e3});l.interceptors.request.use((function(e){return e.hideloading||a["a"].loading({forbidClick:!0}),e.data=u.a.stringify(e.data),e.headers={"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},c["a"].getters.token&&(e.headers.Authorization=c["a"].getters.token),e}),(function(e){return console.log(e),Promise.reject(e)})),l.interceptors.response.use((function(e){a["a"].clear();var t=e.headers.authorization;t&&c["a"].dispatch("user/setToken",t);var n=e.data;return n.code&&200!==n.code?(Object(a["a"])({message:n.msg,forbidClick:!0}),Promise.reject(n||"error")):Promise.resolve(n)}),(function(e){if(a["a"].clear(),e&&e.response)switch(e.response.status){case 400:e.message=e.response.data.error;break;case 401:return"Login"!=d["a"].currentRoute.name&&r["a"].alert({title:"请您重新登录",message:"登录超时"}).then((function(){d["a"].replace({name:"Login"})})),void c["a"].dispatch("user/removeToken");case 403:e.message="拒绝访问";break;case 404:e.message="请求错误,未找到该资源";break;case 405:e.message="请求方法未允许";break;case 408:e.message="请求超时";break;case 500:e.message="服务器端出错";break;case 501:e.message="网络未实现";break;case 502:e.message="网络错误";break;case 503:e.message="服务不可用";break;case 504:e.message="网络超时";break;case 505:e.message="http版本不支持该请求";break;default:e.message="连接错误".concat(e.response.status)}else JSON.stringify(e).includes("timeout")?e.message="服务器响应超时，请重试":e.message="连接服务器失败";return Object(a["a"])({message:e.message,forbidClick:!0}),Promise.reject(e)}));var f=l,p={get:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r={method:"get",url:e,hideloading:n};return t&&(r.params=t),f(r)},post:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r={method:"post",url:e,hideloading:n};return t&&(r.data=t),f(r)},put:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r={method:"put",url:e,hideloading:n};return t&&(r.params=t),f(r)},delete:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r={method:"delete",url:e,hideloading:n};return t&&(r.params=t),f(r)}};t["a"]=p},"7ded":function(e,t,n){"use strict";var r=n("751a");t["a"]={login:function(e){return r["a"].post("auth/login",e)},logout:function(){return r["a"].post("auth/logout",{},!0)}}},9536:function(e,t,n){},a18c:function(e,t,n){"use strict";n("d3b7"),n("3ca3"),n("ddb0");var r=n("2b0e"),a=n("8c4f"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home"},[n("van-nav-bar",{attrs:{title:"首页"}}),n("van-grid",{attrs:{"column-num":1}},[n("van-grid-item",{key:1,attrs:{icon:"close",text:"登出"},on:{click:e.logout}})],1)],1)},s=[],i=(n("ac1f"),n("5319"),n("7ded")),u={name:"Home",components:{},methods:{logout:function(){var e=this;i["a"].logout().then((function(t){200==t.code&&(e.$store.dispatch("user/removeToken"),e.$router.replace({name:"Login"}))}))}}},c=u,d=n("2877"),l=Object(d["a"])(c,o,s,!1,null,null,null),f=l.exports;r["a"].use(a["a"]);var p=[{path:"/",name:"Home",component:f},{path:"/login",name:"Login",component:function(){return n.e("chunk-2d230e44").then(n.bind(null,"ede4"))}}],m=new a["a"]({mode:"history",routes:p});t["a"]=m}});
//# sourceMappingURL=app.0cd86e55.js.map